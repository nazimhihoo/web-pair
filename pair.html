<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NextGen-XMD Session</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>

/* BACKGROUND */

body{
margin:0;
font-family:Arial;
color:#fff;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
background:linear-gradient(135deg,#141414,#1a1a2e);
overflow:hidden;
}

#bg-canvas{
position:fixed;
width:100%;
height:100%;
z-index:-1;
}

/* CONTAINER */

.container{

width:340px;
padding:25px;
border-radius:18px;

background:rgba(72,133,237,0.25);

backdrop-filter:blur(12px);

box-shadow:0 8px 30px rgba(0,0,0,0.6);

text-align:center;

}

/* BOT IMAGE */

#bot-pp{

width:120px;
height:120px;
border-radius:50%;
border:3px solid #25d366;
box-shadow:0 0 25px #25d366;
margin-bottom:10px;

}

/* TITLE */

.title{

font-size:22px;
font-weight:bold;

}

.subtitle{

font-size:14px;
opacity:0.8;
margin-bottom:15px;

}

/* TOGGLE */

.toggle-container{

display:flex;
background:#000;
border-radius:10px;
margin-bottom:15px;

}

.toggle-option{

flex:1;
padding:10px;
cursor:pointer;

}

.toggle-option.active{

background:#25d366;

}

/* INPUT */

.input{

width:100%;
padding:12px;
border-radius:10px;
border:none;
margin-bottom:10px;
background:#000;
color:#fff;

}

/* BUTTON */

.btn{

width:100%;
padding:12px;
border:none;
border-radius:10px;
background:linear-gradient(135deg,#25d366,#00b894);
color:#fff;
font-weight:bold;
cursor:pointer;

}

/* DISPLAY */

.display{

margin-top:15px;
padding:12px;
background:#000;
border-radius:10px;
min-height:40px;

}

/* COPY */

.copy{

margin-top:10px;
padding:10px;
width:100%;
background:#111;
border:none;
border-radius:10px;
color:#fff;
cursor:pointer;

}

/* QR */

#qr{

display:none;
margin-top:10px;

}

#qr img{

width:200px;
border-radius:10px;

}

.footer{

margin-top:15px;
font-size:12px;
opacity:0.7;

}

</style>

</head>

<body>

<canvas id="bg-canvas"></canvas>

<div class="container">

<img id="bot-pp" src="https://files.catbox.moe/i6iehn.bmp">

<div class="title">NextGen-XMD</div>

<div class="subtitle">Connect your WhatsApp</div>


<!-- TOGGLE -->

<div class="toggle-container">

<div class="toggle-option active" onclick="setMode('pair')" id="pairBtn">

Pair Code

</div>

<div class="toggle-option" onclick="setMode('qr')" id="qrBtn">

QR Code

</div>

</div>


<!-- INPUT -->

<input class="input" id="number" placeholder="+923xxxxxxxxx">


<button class="btn" id="submit">

Generate Pair Code

</button>


<div class="display" id="display">

Your code will appear here

</div>


<button class="copy" onclick="copyCode()">

Copy Code

</button>


<div id="qr">

<img id="qrimg">

</div>


<div class="footer">

© NextGen-XMD

</div>

</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>


<script>

/* MODE */

let mode="pair"


function setMode(m){

mode=m

display.innerHTML="Loading..."

qr.style.display="none"

if(m=="pair"){

submit.style.display="block"

number.style.display="block"

pairBtn.classList.add("active")

qrBtn.classList.remove("active")

}

else{

submit.style.display="none"

number.style.display="none"

pairBtn.classList.remove("active")

qrBtn.classList.add("active")

loadQR()

}

}


/* PAIR */

submit.onclick=async()=>{

let num=number.value.replace(/[^0-9]/g,"")

if(!num){

display.innerHTML="Enter number"

return

}

display.innerHTML="Loading..."

let res=await axios("/pair?number="+num)

let code=res.data.code||"Error"

display.innerHTML="CODE: "+code

}


/* QR */

async function loadQR(){

let res=await axios("/qr")

qrimg.src=res.data.qr

qr.style.display="block"

display.innerHTML="Scan QR"

}


/* COPY */

function copyCode(){

let text=display.innerText.replace("CODE: ","")

navigator.clipboard.writeText(text)

display.innerHTML="Copied ✔"

}


/* BACKGROUND */

let canvas=document.getElementById("bg-canvas")

let ctx=canvas.getContext("2d")

canvas.width=innerWidth

canvas.height=innerHeight

let p=[]

for(let i=0;i<50;i++){

p.push({

x:Math.random()*canvas.width,

y:Math.random()*canvas.height,

r:Math.random()*5,

s:Math.random()*2

})

}

function draw(){

ctx.clearRect(0,0,canvas.width,canvas.height)

p.forEach(e=>{

ctx.beginPath()

ctx.arc(e.x,e.y,e.r,0,Math.PI*2)

ctx.fillStyle="#25d366"

ctx.fill()

e.y-=e.s

if(e.y<0)e.y=canvas.height

})

requestAnimationFrame(draw)

}

draw()

</script>


</body>

</html>
